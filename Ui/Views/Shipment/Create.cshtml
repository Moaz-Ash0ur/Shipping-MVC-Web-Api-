@model ShippmentDto

<!-- Breadcroumbs end -->
<!-- Create New Shipment Start -->
<div class="wshipping-content-block shipping-block">
    <div class="container">
        <h2 class="heading2-border mt0">Create New Shipping</h2>
        <div class="row">
            <div class="shipping-form-block">

                <form class="steps" asp-controller="Shipment" asp-action="Create" accept-charset="UTF-8" enctype="multipart/form-data">

                    <!-- progressbar -->
                    <ul id="progressbar">
                        <li class="active">Where From</li>
                        <li>Where Going</li>
                        <li>What</li>
                        <li>How</li>
                        <li>Payment</li>
                        <li>Complete</li>
                    </ul>

                    <fieldset>
                        <h2 class="fs-title">Hello. Where are you shipping from?</h2>
                        <h3 class="fs-subtitle">* Indicates required field </h3>
                        <div class="shipping-form">
                            <div class="row">
                                <!-- Country -->
                                <div class="col-12 col-lg-4">
                                    <div class="form-group">
                                        <label>Country<sup>*</sup></label>
                                        <select id="SenderCountryDropdown" class="form-control country-dropdown" data-target="#SenderCityDropdown" asp-for="UserSender.CountryId" asp-items="@ViewBag.Countries" required>
                                            <option value="">-- Select Country --</option>
                                        </select>
                                        <span asp-validation-for="UserSender.CountryId" class="text-danger"></span>

                                    </div>
                                </div>

                                <!-- Sender Name -->
                                <div class="col-12 col-lg-4">
                                    <div class="form-group">
                                        <label>Company or Name<sup>*</sup></label>
                                        <input asp-for="UserSender.SenderName" class="form-control" required />
                                        <span asp-validation-for="UserSender.SenderName" class="text-danger"></span>

                                    </div>
                                </div>

                                <!-- Contact -->
                                <div class="col-12 col-lg-4">
                                    <div class="form-group">
                                        <label>Contact<sup>*</sup></label>
                                        <input asp-for="UserSender.Contact" class="form-control" required />
                                        <span asp-validation-for="UserSender.Contact" class="text-danger"></span>

                                    </div>
                                </div>
                            </div>

                            <!-- Address -->
                            <div class="row">
                                <div class="col-12 col-lg-12">
                                    <div class="form-group">
                                        <label>Address<sup>*</sup></label>
                                        <input asp-for="UserSender.Address" class="form-control" placeholder="Street Address" required />
                                        <span asp-validation-for="UserSender.Address" class="text-danger"></span>

                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <!-- Postal Code -->
                                <div class="col-12 col-lg-4">
                                    <div class="form-group">
                                        <label>Postal Code<sup>*</sup></label>
                                        <input asp-for="UserSender.PostalCode" class="form-control" required />
                                        <span asp-validation-for="UserSender.PostalCode" class="text-danger"></span>

                                    </div>
                                </div>

                                <!-- City -->
                                <div class="col-12 col-lg-4">
                                    <div class="form-group">
                                        <label>City<sup>*</sup></label>
                                        <select id="SenderCityDropdown" class="form-control city-dropdown" asp-for="UserSender.CityId" required>
                                            <option value="">-- Select City --</option>
                                        </select>
                                        <span asp-validation-for="UserSender.CityId" class="text-danger"></span>

                                    </div>
                                </div>

                                <!-- Other Address -->
                                <div class="col-12 col-lg-4">
                                    <div class="form-group">
                                        <label>Other Address Information</label>
                                        <input asp-for="UserSender.OtherAddress" class="form-control" />
                                        <span asp-validation-for="UserSender.OtherAddress" class="text-danger"></span>

                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <!-- Email -->
                                <div class="col-12 col-lg-4">
                                    <div class="form-group">
                                        <label>E-mail <sup>*</sup></label>
                                        <input asp-for="UserSender.Email" type="email" class="form-control" required />
                                        <span asp-validation-for="UserSender.Email" class="text-danger"></span>

                                    </div>
                                </div>

                                <!-- Phone -->
                                <div class="col-12 col-lg-4">
                                    <div class="form-group">
                                        <label>Phone<sup>*</sup></label>
                                        <input asp-for="UserSender.Phone" class="form-control" required />
                                        <span asp-validation-for="UserSender.Phone" class="text-danger"></span>

                                    </div>
                                </div>
                            </div>

                        </div>

                        <!-- Actions -->
                        <input type="button" name="next" class="next action-button" value="Continue" />
                        <input type="reset" name="cancel" class="action-button btn-red" value="Cancel Shipment" />
                    </fieldset>


                    <fieldset>
                        <h2 class="fs-title">Where is your shipping going?</h2>

                        <h3 class="fs-subtitle">* Indicates required field </h3>
                        <div class="shipping-form">
                            <div class="row">
                                <!-- Country -->
                                <div class="col-12 col-lg-4">
                                    <label>Country<sup>*</sup></label>
                                    <select id="ReceiverCountryDropdown" class="form-control country-dropdown" data-target="#ReceiverCityDropdown" asp-for="UserReceiver.CountryId" asp-items="@ViewBag.Countries" required>
                                        <option value="">-- Select Country --</option>
                                    </select>
                                    <span asp-validation-for="UserReceiver.CountryId" class="text-danger"></span>

                                </div>

                                <!-- Name -->
                                <div class="col-12 col-lg-4">
                                    <div class="form-group">
                                        <label>Company or Name<sup>*</sup></label>
                                        <input asp-for="UserReceiver.ReceiverName" class="form-control" required />
                                        <span asp-validation-for="UserReceiver.ReceiverName" class="text-danger"></span>

                                    </div>
                                </div>

                                <!-- Contact -->
                                <div class="col-12 col-lg-4">
                                    <div class="form-group">
                                        <label>Contact<sup>*</sup></label>
                                        <input asp-for="UserReceiver.Contact" class="form-control" required />
                                        <span asp-validation-for="UserReceiver.Contact" class="text-danger"></span>

                                    </div>
                                </div>
                            </div>

                            <!-- Address -->
                            <div class="row">
                                <div class="col-12 col-lg-12">
                                    <div class="form-group">
                                        <label>Address<sup>*</sup></label>
                                        <input asp-for="UserReceiver.Address" class="form-control" placeholder="Street Address" required />
                                        <span asp-validation-for="UserReceiver.Address" class="text-danger"></span>

                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <!-- Postal Code -->
                                <div class="col-12 col-lg-4">
                                    <div class="form-group">
                                        <label>Postal Code<sup>*</sup></label>
                                        <input asp-for="UserReceiver.PostalCode" class="form-control" required />
                                        <span asp-validation-for="UserReceiver.PostalCode" class="text-danger"></span>

                                    </div>
                                </div>

                                <!-- City -->
                                <div class="col-12 col-lg-4">
                                    <div class="form-group">
                                        <label>City<sup>*</sup></label>
                                        <select id="ReceiverCityDropdown" class="form-control city-dropdown" asp-for="UserReceiver.CityId" required>
                                            <option value="">-- Select City --</option>
                                        </select>
                                        <span asp-validation-for="UserReceiver.CityId" class="text-danger"></span>

                                    </div>
                                </div>

                                <!-- Other Address -->
                                <div class="col-12 col-lg-4">
                                    <div class="form-group">
                                        <label>Other Address</label>
                                        <input asp-for="UserReceiver.OtherAddress" class="form-control" />

                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <!-- Email -->
                                <div class="col-12 col-lg-4">
                                    <div class="form-group">
                                        <label>E-mail <sup>*</sup></label>
                                        <input asp-for="UserReceiver.Email" type="email" class="form-control" required />
                                        <span asp-validation-for="UserReceiver.Email" class="text-danger"></span>

                                    </div>
                                </div>

                                <!-- Phone -->
                                <div class="col-12 col-lg-4">
                                    <div class="form-group">
                                        <label>Phone<sup>*</sup></label>
                                        <input asp-for="UserReceiver.Phone" class="form-control" required />
                                        <span asp-validation-for="UserReceiver.Phone" class="text-danger"></span>

                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-12">
                                    <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. </p>
                                </div>
                            </div>
                        </div>

                        <!-- Actions -->
                        <input type="button" name="previous" class="previous action-button" value="Previous" />
                        <input type="button" name="next" class="next action-button" value="Continue" />
                    </fieldset>


                    <fieldset>
                        <h2 class="fs-title">What kind of packaging are you using?</h2>
                        <h3 class="fs-subtitle">* Indicates required field </h3>
                        <div class="shipping-form">
                            <div class="row">
                                <div class="col-12 col-lg-8">
                                    <div class="row">
                                        <div class="col-12 col-lg-6">
                                            <div class="form-group">
                                                <label>ٍٍShipping Packaging <sup>*</sup></label>
                                                <div class="input-comment">
                                                    <select asp-for="@Model.ShippingPackgingId" asp-items="@ViewBag.ShippingPackages" class="form-control">
                                                        <option value="">Select Packaging</option>                                                     
                                                    </select>
                                                    <span asp-validation-for="ShippingPackgingId" class="text-danger"></span>

                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-12 col-lg-6">
                                            <div class="form-group">
                                                <label>Weight<sup>*</sup></label>
                                                <div class="input-comment">
                                                    <input type="text" class="form-control" asp-for="Weight" required />
                                                    <span asp-validation-for="Weight" class="text-danger"></span>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-12 col-lg-6">
                                            <div class="form-group">
                                                <label>Length</label>
                                                <div class="input-comment">
                                                    <input type="text" class="form-control" asp-for="Length" />
                                                    <span asp-validation-for="Length" class="text-danger"></span>

                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-12 col-lg-6">
                                            <div class="form-group">
                                                <label>Width</label>
                                                <div class="input-comment">
                                                    <input type="text" class="form-control" asp-for="Width" />
                                                    <span asp-validation-for="Width" class="text-danger"></span>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-12 col-lg-6">
                                            <div class="form-group">
                                                <label>Height</label>
                                                <div class="input-comment">
                                                    <input type="text" class="form-control" asp-for="Height" />
                                                    <span asp-validation-for="Height" class="text-danger"></span>

                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-12 col-lg-6">
                                            <div class="form-group">
                                                <label>Declared value</label>
                                                <div class="input-comment">
                                                    <input type="text" class="form-control" asp-for="PackageValue" />
                                                    <span asp-validation-for="PackageValue" class="text-danger"></span>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 col-lg-4">
                                    <div class="what-package"><img src="~/assets/images/package.jpg" alt="" /></div>
                                </div>
                            </div>
                        </div>
                        <input type="button" name="previous" class="previous action-button" value="Previous" />
                        <input type="button" name="next" class="next action-button" value="Continue" />
                    </fieldset>
                  

                    <fieldset>
                        <h2 class="fs-title">How would you like to ship?</h2>
                        <h3 class="fs-subtitle">* Indicates required field </h3>
                        <div class="shipping-form dropoff-block">                

                            <div class="tab-content">

                                <div role="tabpanel" class="tab-pane active" id="no-drop">
                                    <div class="row">
                                        <div class="col-12 col-lg-4">
                                            <div class="form-group">
                                                <label>Dropoff date:</label>
                                                <div class="datepicker-group">
                                                    <input type="text" class="form-control datetimepicker1" placeholder="Date" />
                                                    <div class="datepicker-icon"><i class="fa fa-calendar-alt"></i></div>
                                                    <span class="error1" style="display: none;"> <i class="error-log fa fa-exclamation-triangle"></i> </span>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <h3>When would like it delivered?</h3>
                                    <div class="row">
                                        <div class="col-12 col-lg-4">
                                            <div class="form-group">
                                                <label>Date and short details:</label>
                                                <input type="text" class="form-control" name="sDetails" />
                                                <span class="error1" style="display: none;"> <i class="error-log fa fa-exclamation-triangle"></i> </span>

                                            </div>
                                        </div>
                                        <div class="col-12 col-lg-4">
                                            <div class="form-group">
                                                <label>Shipping Types</label>
                                                <div class="input-comment">
                                                    <select asp-for="ShippingTypeId" class="form-control" asp-items="@ViewBag.ShippingTypes">
                                                        <option value="">Select Type For Shipping</option>                                                     
                                                    </select>
                                                    <span asp-validation-for="ShippingTypeId" class="text-danger"></span>



                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div role="tabpanel" class="tab-pane" id="yes-drop">
                                    <div class="row">
                                        <div class="col-12 col-lg-4">
                                            <div class="form-group">
                                                <label>Pickup date:</label>
                                                <div class="datepicker-group">
                                                    <input type="text" class="form-control datetimepicker1" placeholder="Date" />
                                                    <div class="datepicker-icon"><i class="fa fa-calendar-alt"></i></div>
                                                    <span class="error1" style="display: none;"> <i class="error-log fa fa-exclamation-triangle"></i> </span>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="review">
                                        <h3>Pickup Address <a href="" title="Edit" class="btn-edit">Edit</a></h3>
                                        <p>
                                            Lorem Ipsum is simply dummy text<br>
                                            of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s.
                                        </p>
                                    </div>
                                    <div class="review">
                                        <h3>Pickup Details <a href="" title="Edit" class="btn-edit">Edit</a></h3>
                                        <p>
                                            Your pickup window: 9:00AM - 7:00PM<br>
                                            Pickup location: Front Door
                                        </p>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <input type="button" name="previous" class="previous action-button" value="Previous" />
                        <input type="button" name="next" class="next action-button" value="Continue" />
                    </fieldset>
                  
                      
                    <fieldset>
                        <div class="shipping-form">
                            <h1 class="tanks-message">Thank You For Create Shipping</h1>
                        </div>
                        <input type="submit" name="submit" class="submit action-button" value="Submit" />

                    </fieldset>
                
                
                
                </form>


            </div>
        </div>
    </div>
</div>
<!-- Create New Shipment end -->
@section Scripts
{
    <partial name="_ValidationScriptsPartial" />

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
    <script src="https://unpkg.com/isotope-layout@3/dist/isotope.pkgd.min.js"></script>



    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // جلب كل country dropdown
            const countryDropdowns = document.querySelectorAll(".country-dropdown");

            countryDropdowns.forEach(dropdown => {
                dropdown.addEventListener("change", function () {
                    const targetCitySelector = this.getAttribute("data-target");
                    const cityDropdown = document.querySelector(targetCitySelector);
                    if (cityDropdown) {
                        loadCities(this.value, cityDropdown);
                    }
                });
            });

            function loadCities(countryId, cityDropdown) {
                cityDropdown.innerHTML = '<option value="">-- Select City --</option>';
                if (!countryId) return;

                fetch(`/Shipment/GetCitiesByCountry?countryId=${countryId}`)
                    .then(res => res.json())
                    .then(data => {
                        data.forEach(city => {
                            const option = document.createElement("option");
                            option.value = city.Id;
                            option.innerText = city.CityEname;
                            cityDropdown.appendChild(option);
                        });
                    })
                    .catch(err => console.error("Error loading cities:", err));
            }
        });



    </script>


    <script>

                $(".next").click(function () {
            var currentFieldset = $(this).closest("fieldset"); 
            var inputs = currentFieldset.find(":input");      

            var isValid = true;

            inputs.each(function () {
                if (!$(this).valid()) { 
                    isValid = false;
                }
            });

            if (isValid) {
                currentFieldset.hide().next("fieldset").fadeIn();
            }
        });

    </script>







}
